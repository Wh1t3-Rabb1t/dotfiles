#   _    _ _   _
#  | | _(_) |_| |_ _   _
#  | |/ / | __| __| | | |
#  |   <| | |_| |_| |_| |
#  |_|\_\_|\__|\__|\__, | temu
#==================|____/======================================================#

# See:
# https://sw.kovidgoyal.net/kitty/generated/rc
# Restore kitty sessions:  https://github.com/dflock/kitty-save-session


# STARTUP
#------------------------------------------------------------------------------#
startup_session ./session.conf
hide_window_decorations titlebar-only
remember_window_size yes

# New windows will have a generic title
shell_integration no-title


# MISC
#------------------------------------------------------------------------------#
# Clear all default keyboard shortcuts
clear_all_shortcuts yes

# Allow the use of alt for key bindings
macos_option_as_alt yes

# URL highlights
underline_hyperlinks hover
show_hyperlink_targets yes

# Remove trailing whitespace when copying to clipboard
strip_trailing_spaces smart


# FONT
#------------------------------------------------------------------------------#
font_size 12.0

# Underline (tweak for nvim ibl)
modify_font underline_position 2

# Window specific zoom bindings
map super+equal change_font_size current +1.0
map super+minus change_font_size current -1.0

# Universal zoom bindings
map super+shift+equal change_font_size all +1.0
map super+shift+minus change_font_size all -1.0


# SCROLLBACK
#------------------------------------------------------------------------------#
scrollback_lines 5000
scrollback_pager_history_size 100
scrollback_pager nvim -c 'setlocal nonumber nolist showtabline=0 foldcolumn=0|Man!' -c "autocmd VimEnter * normal G" -

# Nvim scrollback
map shift+space>shift+space show_last_command_output
map shift+space>space show_scrollback

# Open notes inbox in nvim
map shift+space>shift+n launch --type=tab --tab-title="ï€ " nvim ~/.Notes/inbox.md

# Page up / down
map page_up scroll_page_up
map page_down scroll_page_down

# Up / down four lines at a time
map shift+up combine : scroll_line_up : scroll_line_up : scroll_line_up : scroll_line_up
map shift+down combine : scroll_line_down : scroll_line_down : scroll_line_down : scroll_line_down

# Next / previous prompt
map shift+page_up scroll_to_prompt -1
map shift+page_down scroll_to_prompt 1

# Top / bottom of the buffer
map super+page_up scroll_home
map super+page_down scroll_end

# Move the contents of the screen into the scrollback
map super+k clear_terminal to_cursor_scroll active

# Clear the terminal scrollback by erasing it
map super+shift+k clear_terminal scrollback active


# WINDOWS
#------------------------------------------------------------------------------#
# Init layouts
enabled_layouts splits:split_axis=vertical, horizontal

# Window settings
# active_border_color #d5e2e2
# inactive_border_color #024949
draw_minimal_borders no
window_border_width 2px
single_window_margin_width 2
single_window_margin_height 2
window_margin_width 2
window_margin_height 2
window_padding_height 4
window_padding_width 4
placement_strategy top-left

# Launch windows
map super+n new_os_window
map super+shift+n detach_window

# Navigate windows
map ctrl+up neighboring_window top
map ctrl+down neighboring_window bottom
map ctrl+left neighboring_window left
map ctrl+right neighboring_window right

# Resize windows
map ctrl+shift+up kitten relative_resize.py up
map ctrl+shift+down kitten relative_resize.py down
map ctrl+shift+left kitten relative_resize.py left
map ctrl+shift+right kitten relative_resize.py right

# Close
map super+w close_window_with_confirmation
map super+shift+w close_os_window

# Swap window positions
map shift+space>shift+m swap_with_window
visual_window_select_characters TKLIONDSFWECYHMVU

# Rotate the current split
map super+r layout_action rotate

# Cycle layouts
map super+shift+r next_layout


# TABS
#------------------------------------------------------------------------------#
# Tab settings
tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{index}: {title}"
tab_bar_style powerline
tab_powerline_style slanted
tab_bar_edge top
active_tab_font_style bold
inactive_tab_font_style italic
tab_bar_align left

# Launch tabs
map super+t launch --location=split --cwd=current --window-title current
map super+shift+t new_tab

# Navigate tabs
map ctrl+end next_tab
map ctrl+home previous_tab


# THEME & BACKGROUND
#------------------------------------------------------------------------------#
# Background image must be in PNG format
# ! BUG: Placing a comment on the same line as the background image
# causes an bug which prevents the image from loading consistently

# MISC
# background_image ./backgrounds/matrix_under_the_bridge.png
# background_image ./backgrounds/tool_10000.png

# SPACE
# background_image ./backgrounds/space_planet_scene.png
# background_image ./backgrounds/sc2_battle_cruiser.png
# background_image ./backgrounds/sc2_battle_cruisers_planet.png
# background_image ./backgrounds/sc2_battle_cruisers_planet_reverse.png

# SHIPS
# background_image ./backgrounds/pirate_ship.png
# background_image ./backgrounds/storm_ship_sea_01.png
# background_image ./backgrounds/storm_ship_sea_02.png
# background_image ./backgrounds/thousand_sunny_one_piece_tablet.png

# CITYSCAPES
# background_image ./backgrounds/bat_signal.png
# background_image ./backgrounds/blade_runner.png
# background_image ./backgrounds/ff7_remake_midgar.png
# background_image ./backgrounds/bleak_cityscape.png

# MOUNTAINS
# background_image ./backgrounds/snow_covered_mountain.png
# background_image ./backgrounds/canada_rockies.png
# background_image ./backgrounds/reflection_of_snowy_mountains_on_lake.png
# background_image ./backgrounds/mountains_winter_snow_lake.png
# background_image ./backgrounds/sony_world_photography_award_2024.png
# background_image ./backgrounds/mt_hood_oregon.png

# FORESTS
# background_image ./backgrounds/orange_sunset_over_forest.png
# background_image ./backgrounds/dark_snowy_forest.png
# background_image ./backgrounds/sunset_valley_light.png
# background_image ./backgrounds/sunset_valley_dark.png

# NEW
# background_image ./backgrounds/alley.png
# background_image ./backgrounds/fuji.png
# background_image ./backgrounds/starry_night_over_mountain.png
# background_image ./backgrounds/falling_into_city.png
# background_image ./backgrounds/snow_valley.png
# background_image ./backgrounds/sunset.png
# background_image ./backgrounds/eclipse.png
# background_image ./backgrounds/dubai.png
# background_image ./backgrounds/galactic_render.png
# background_image ./backgrounds/gotham_city.png
# background_image ./backgrounds/bloodborne_amygdala.png
# background_image ./backgrounds/bloodborne_crow.png
# background_image ./backgrounds/bloodborne_loran_chalice.png
# background_image ./backgrounds/yharnam.png
background_image ./backgrounds/yharnam_2.png
# background_image ./backgrounds/bat_signal_1.png
# background_image ./backgrounds/planet_express.png
# background_image ./backgrounds/tron.png
# background_image ./backgrounds/wake_up_neo.png
# background_image ./backgrounds/vader_01.png


# background_image_layout centered
background_image_layout cscaled
background_tint 0.94

# BEGIN_KITTY_THEME
# Wez
include current-theme.conf
# END_KITTY_THEME

# Nice themes
#-------------
# ENCOM
# Dark Pastel
# Default
# Night Lion V1
# Vibrant Ink
# Wez


# CURSOR
#------------------------------------------------------------------------------#
# !! cursor color must be set after the theme
# cursor #ffff00

# Cursor jump animations
cursor_trail 1
cursor_trail_decay 0.1 0.2
cursor_trail_start_threshold 10






################################################################################


# COPY / PASTE
#------------------------------------------------------------------------------#
# map super+c copy_to_clipboard
# map super+v paste_from_clipboard


# # Open hyperlinks (useful for opening linked rg output in nvim)
# map shift+space>shift+o kitten hints --type hyperlink

# # Select text from the scrollback buffer and copy to the clipboard
# map shift+space>t kitten hints --type word --program @
# map shift+space>p kitten hints --type path --program @
# map shift+space>l kitten hints --type line --program @

# # Select multiple items from the scrollback buffer and paste to the command prompt
# map shift+space>shift+t kitten hints --type word --multiple --program -
# map shift+space>shift+p kitten hints --type path --multiple --program -
# map shift+space>shift+l kitten hints --type line --multiple --program -


# Used to launch broot in a startup session and keep kitty window open after broot closes
# launch --hold zsh -il -c "br"

# Use vim to select text from the scrollback buffer
# map shift+space>shift+space pipe @ansi overlay /Users/tillcappel/.config/kitty/scrollback-vim.zsh
# scrollback_pager nvim --noplugin -c "set signcolumn=no showtabline=0" -c "silent write! /tmp/sbbuf | te cat /tmp/sbbuf -"


# SAMPLE OPTIONS:

# modify_font underline_thickness 95%
# modify_font underline_position -2

# Move the active window to the indicated screen edge
# (when splits layout is active this behaves similarly
# to moving editor groups in vscode)
#
# map super+ctrl+i layout_action move_to_screen_edge top
# map super+ctrl+k layout_action move_to_screen_edge left
# map super+ctrl+l layout_action move_to_screen_edge right
# map super+ctrl+t layout_action move_to_screen_edge bottom

# inactive_text_alpha 0.8
# map alt+/ open_url https://sw.kovidgoyal.net/kitty/
# map alt+/ load_config_file

# confirm_os_window_close 1
# modify_font cell_width 105%

# active_tab_foreground   #000
# active_tab_background   #eee
# inactive_tab_foreground #444
# inactive_tab_background #999

# map super+t new_window
# map super+shift+t new_tab
# map alt+t select_tab

# map ctrl+f>l kitten hints --type line --multiple --multiple-joiner newline --program @
# kitty +kitten hints --multiple --multiple-joiner --word-characters

# scrollback_pager less +G -R
# background_opacity 0.7
# adjust_line_height 110%

# # moves the window into a new tab
# map ctrl+f3 detach_window new-tab
# # moves the window into the previously active tab
# map ctrl+f3 detach_window tab-prev
# # moves the window into the tab at the left of the active tab
# map ctrl+f3 detach_window tab-left
# # asks which tab to move the window into
# map ctrl+f4 detach_window ask
# Similarly, you can detach the current tab, with:

# background_opacity 0.8
# background_blur 1
# cursor_beam_thickness 2
# cursor_shape beam
